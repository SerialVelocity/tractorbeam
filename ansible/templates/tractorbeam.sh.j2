#!/usr/bin/env bash

case "$1" in
  daily)
    if [ -f "/config/tractorbeam/tractorbeam.yml" ]; then
      ansible-playbook -i /ansible/inventories/all.ini -e "@/config/tractorbeam/tractorbeam.yml" /ansible/backup-daily.yml
    else
      ansible-playbook -i /ansible/inventories/all.ini /ansible/backup-daily.yml
    fi
    ;;
  weekly)
    if [ -f "/config/tractorbeam/tractorbeam.yml" ]; then
      ansible-playbook -i /ansible/inventories/all.ini -e "@/config/tractorbeam/tractorbeam.yml" /ansible/backup-weekly.yml
    else
      ansible-playbook -i /ansible/inventories/all.ini /ansible/backup-weekly.yml
    fi
    ;;
  monthly)
    if [ -f "/config/tractorbeam/tractorbeam.yml" ]; then
      ansible-playbook -i /ansible/inventories/all.ini -e "@/config/tractorbeam/tractorbeam.yml" /ansible/backup-monthly.yml
    else
      ansible-playbook -i /ansible/inventories/all.ini /ansible/backup-monthly.yml
    fi
    ;;
  *)
    echo $"Usage: $0 {daily|weekly|monthly}"
    exit 1

esac
